<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Clean Password Generator</title>
  <style>
    /* --- Base + Reset --- */
    *, *::before, *::after { box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      margin: 0;
      font-family: "Segoe UI", Calibri, system-ui, -apple-system, Roboto, Arial, sans-serif;
      background: var(--bg);
      color: var(--text);
      display: flex;
      flex-direction: column;
      min-height: 100vh;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      transition: background 0.3s ease, color 0.3s ease;
    }
    button, input, select, textarea { font: inherit; }

    :root {
      /* Light theme */
      --bg: #f5f7fb;
      --card-bg: #ffffff;
      --text: #0f172a;
      --muted: #64748b;
      --primary: #6366f1;
      --primary-hover: #4f46e5;
      --border: #e2e8f0;
      --input-bg: #f1f5f9;
      --shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 8px 10px -6px rgba(0, 0, 0, 0.1);
      --danger: #ef4444;
      --success: #22c55e;
      --warning: #eab308;
    }
    :root[data-theme="dark"] {
      --bg: #0f172a;
      --card-bg: #1e293b;
      --text: #f1f5f9;
      --muted: #94a3b8;
      --primary: #818cf8;
      --primary-hover: #6366f1;
      --border: #334155;
      --input-bg: #0f172a;
      --shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.5);
    }

    .wrap { max-width: 600px; margin: 0 auto; padding: 2rem 1.5rem; width: 100%; flex: 1; display: flex; flex-direction: column; justify-content: center; }

    header { display: flex; align-items: center; justify-content: space-between; margin-bottom: 1.5rem; }
    .title { font-size: 1.5rem; font-weight: 800; letter-spacing: -0.025em; }

    /* Theme Toggle */
    .theme-toggle {
      background: transparent; border: 1px solid var(--border);
      color: var(--muted); border-radius: 99px; padding: 8px;
      cursor: pointer; display: flex; align-items: center; justify-content: center;
      transition: all 0.2s;
    }
    .theme-toggle:hover { color: var(--text); border-color: var(--text); background: var(--input-bg); }
    .theme-toggle svg { width: 20px; height: 20px; stroke-width: 2; }

    /* Card */
    .card { background: var(--card-bg); border: 1px solid var(--border); border-radius: 1.5rem; padding: 2rem; box-shadow: var(--shadow); }

    /* Output Area */
    .output-container { position: relative; margin-bottom: 1.5rem; }
    .password-display {
      width: 100%; font-family: 'Courier New', Courier, monospace;
      font-size: 2rem; font-weight: 700; padding: 1.5rem;
      border: 2px solid var(--border); background: var(--input-bg);
      color: var(--primary); border-radius: 1rem; text-align: center;
      word-break: break-all; min-height: 86px; display: flex; align-items: center; justify-content: center;
      transition: border-color 0.2s;
    }
    .password-display:focus { outline: none; border-color: var(--primary); }
    
    /* Strength Bar */
    .strength-meter { height: 4px; background: var(--border); margin-top: 10px; border-radius: 2px; overflow: hidden; display: flex; }
    .strength-bar { height: 100%; width: 0%; transition: width 0.3s ease, background-color 0.3s ease; }

    /* Controls */
    .controls { display: grid; gap: 1.5rem; margin-bottom: 2rem; }
    
    .control-group { display: flex; flex-direction: column; gap: 0.5rem; }
    .label-row { display: flex; justify-content: space-between; font-weight: 600; font-size: 0.9rem; color: var(--muted); }
    
    /* Range Slider */
    input[type=range] { width: 100%; accent-color: var(--primary); cursor: pointer; height: 6px; }

    /* Checkboxes grid */
    .options-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; }
    .checkbox-label {
      display: flex; align-items: center; gap: 0.75rem; cursor: pointer;
      font-weight: 600; font-size: 0.95rem; user-select: none;
      padding: 0.5rem; border-radius: 0.5rem; transition: background 0.2s;
    }
    .checkbox-label:hover { background: var(--input-bg); }
    input[type="checkbox"] {
      width: 1.25rem; height: 1.25rem; accent-color: var(--primary);
      border-radius: 4px; cursor: pointer;
    }

    /* Actions */
    .actions { display: grid; grid-template-columns: 2fr 1fr; gap: 1rem; }
    
    .btn {
      border: none; border-radius: 0.75rem; padding: 1rem;
      font-weight: 700; font-size: 1rem; cursor: pointer;
      display: flex; align-items: center; justify-content: center; gap: 0.5rem;
      transition: transform 0.1s, opacity 0.2s;
    }
    .btn:active { transform: scale(0.98); }
    .btn svg { width: 20px; height: 20px; }

    .btn-primary { background: var(--primary); color: white; }
    .btn-primary:hover { background: var(--primary-hover); }
    
    .btn-secondary { background: var(--input-bg); color: var(--text); }
    .btn-secondary:hover { filter: brightness(0.95); }

    footer { text-align: center; padding: 1rem; color: var(--muted); font-size: 0.85rem; }

    /* Toast Notification */
    .toast {
      position: fixed; bottom: 2rem; left: 50%; transform: translateX(-50%) translateY(20px);
      background: var(--text); color: var(--bg); padding: 0.75rem 1.5rem;
      border-radius: 99px; font-weight: 600; opacity: 0; visibility: hidden;
      transition: all 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
      z-index: 100; box-shadow: 0 10px 15px -3px rgba(0,0,0,0.1);
    }
    .toast.show { opacity: 1; visibility: visible; transform: translateX(-50%) translateY(0); }

    @media (max-width: 480px) {
      .options-grid { grid-template-columns: 1fr; }
      .actions { grid-template-columns: 1fr; }
    }
  </style>
</head>
<body>

  <div class="wrap">
    <header>
      <div class="title">Password Generator</div>
      <button class="theme-toggle" id="themeToggle" aria-label="Toggle Theme">
        </button>
    </header>

    <main class="card">
      
      <div class="output-container">
        <div class="password-display" id="passwordOutput" tabindex="0">
          CLICK GENERATE
        </div>
        <div class="strength-meter">
          <div class="strength-bar" id="strengthBar"></div>
        </div>
      </div>

      <div class="controls">
        
        <div class="control-group">
          <div class="label-row">
            <label for="lengthRange">Password Length</label>
            <span id="lengthValue">16</span>
          </div>
          <input type="range" id="lengthRange" min="6" max="64" value="16">
        </div>

        <div class="options-grid">
          <label class="checkbox-label">
            <input type="checkbox" id="incUpper" checked> Uppercase (No I, O)
          </label>
          <label class="checkbox-label">
            <input type="checkbox" id="incLower" checked> Lowercase (No l)
          </label>
          <label class="checkbox-label">
            <input type="checkbox" id="incNumbers" checked> Numbers (No 0, 1)
          </label>
          <label class="checkbox-label">
            <input type="checkbox" id="incSymbols" checked> Symbols (!@#$)
          </label>
        </div>
      </div>

      <div class="actions">
        <button id="btnGenerate" class="btn btn-primary">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 2l-2 2m-7.61 7.61a5.5 5.5 0 1 1-7.778 7.778 5.5 5.5 0 0 1 7.777-7.777zm0 0L15.5 7.5m0 0l3 3L22 7l-3-3m-3.5 3.5L19 4"/></svg>
          Generate New
        </button>
        <button id="btnCopy" class="btn btn-secondary">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
          Copy
        </button>
      </div>

    </main>
    
    <footer>Secure • Ambiguity Free • Fast</footer>
  </div>

  <div class="toast" id="toast">Password copied to clipboard</div>

  <script>
    (function() {
      // DOM Elements
      const els = {
        output: document.getElementById('passwordOutput'),
        lengthRange: document.getElementById('lengthRange'),
        lengthValue: document.getElementById('lengthValue'),
        incUpper: document.getElementById('incUpper'),
        incLower: document.getElementById('incLower'),
        incNumbers: document.getElementById('incNumbers'),
        incSymbols: document.getElementById('incSymbols'),
        btnGenerate: document.getElementById('btnGenerate'),
        btnCopy: document.getElementById('btnCopy'),
        strengthBar: document.getElementById('strengthBar'),
        toast: document.getElementById('toast'),
        themeToggle: document.getElementById('themeToggle')
      };

      // Character Sets (Already stripped of I, O, l, 0, 1)
      const CHARS = {
        upper: 'ABCDEFGHJKLMNPQRSTUVWXYZ',
        lower: 'abcdefghijkmnpqrstuvwxyz', 
        numbers: '23456789',
        symbols: '!@#$%^&*()_+~`|}{[]:;?><,./-='
      };

      // --- Theme Logic ---
      function initTheme() {
        const saved = localStorage.getItem('theme');
        const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
        const isDark = saved === 'dark' || (!saved && prefersDark);
        document.documentElement.setAttribute('data-theme', isDark ? 'dark' : 'light');
        updateThemeIcon(isDark);
      }

      function toggleTheme() {
        const isDark = document.documentElement.getAttribute('data-theme') === 'dark';
        const newTheme = isDark ? 'light' : 'dark';
        document.documentElement.setAttribute('data-theme', newTheme);
        localStorage.setItem('theme', newTheme);
        updateThemeIcon(!isDark);
      }

      function updateThemeIcon(isDark) {
        els.themeToggle.innerHTML = isDark 
          ? '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>'
          : '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/></svg>';
      }

      // --- Core Logic ---
      function getPool() {
        let pool = '';
        if (els.incUpper.checked) pool += CHARS.upper;
        if (els.incLower.checked) pool += CHARS.lower;
        if (els.incNumbers.checked) pool += CHARS.numbers;
        if (els.incSymbols.checked) pool += CHARS.symbols;
        return pool;
      }

      function generatePassword() {
        const length = parseInt(els.lengthRange.value);
        const pool = getPool();

        if (!pool) {
          els.output.textContent = 'SELECT OPTIONS';
          els.strengthBar.style.width = '0%';
          return;
        }

        let password = '';
        const array = new Uint32Array(length);
        window.crypto.getRandomValues(array);

        for (let i = 0; i < length; i++) {
          password += pool[array[i] % pool.length];
        }

        els.output.textContent = password;
        calculateStrength(password, pool.length);
        
        els.btnCopy.innerHTML = '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg> Copy';
      }

      function calculateStrength(password, poolSize) {
        // Entropy calc: Length * log2(poolSize)
        const entropy = password.length * Math.log2(poolSize);
        let strength = 0; 
        let color = 'var(--danger)';

        if (entropy > 120) { strength = 100; color = 'var(--success)'; }
        else if (entropy > 80) { strength = 75; color = 'var(--success)'; }
        else if (entropy > 50) { strength = 50; color = 'var(--warning)'; }
        else { strength = 25; color = 'var(--danger)'; }

        els.strengthBar.style.width = `${strength}%`;
        els.strengthBar.style.backgroundColor = color;
      }

      function copyToClipboard() {
        const text = els.output.textContent;
        if (!text || text === 'CLICK GENERATE' || text === 'SELECT OPTIONS') return;

        navigator.clipboard.writeText(text).then(() => {
          showToast();
          els.btnCopy.innerHTML = '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg> Copied!';
        });
      }

      function showToast() {
        els.toast.classList.add('show');
        setTimeout(() => els.toast.classList.remove('show'), 2000);
      }

      // --- Event Listeners ---
      els.lengthRange.addEventListener('input', (e) => {
        els.lengthValue.textContent = e.target.value;
        generatePassword();
      });

      [els.incUpper, els.incLower, els.incNumbers, els.incSymbols].forEach(el => {
        el.addEventListener('change', generatePassword);
      });

      els.btnGenerate.addEventListener('click', generatePassword);
      els.btnCopy.addEventListener('click', copyToClipboard);
      els.themeToggle.addEventListener('click', toggleTheme);

      // --- Init ---
      initTheme();
      generatePassword();
    })();
  </script>
</body>
</html>
